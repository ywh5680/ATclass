## 模板基础

Django的模板系统提供了一种方便的方式来生成动态HTML。模板包含静态内容和特殊语法，用于描述如何将动态内容插入到页面中。

### 创建模板目录

首先，在你的应用目录下创建一个`templates`目录，然后在其中创建一个与应用同名的子目录：

```
polls/
    templates/
        polls/
            index.html
```

### 模板语法

Django模板使用特殊的标签`{% %}`、变量`{{ }}`和过滤器来控制模板的渲染。

### 变量

变量使用双大括号表示：`{{ variable }}`。当模板引擎遇到一个变量时，它会计算这个变量并将结果插入到输出中。

```html
<h1>Hello, {{ name }}</h1>
```

如果`name`的值为"John"，则输出为：`<h1>Hello, John</h1>`

### 标签

标签使用`{% tag %}`语法，用于执行控制流等操作：

```html
{% if latest_question_list %}
    <ul>
    {% for question in latest_question_list %}
        <li>{{ question.question_text }}</li>
    {% endfor %}
    </ul>
{% else %}
    <p>No polls are available.</p>
{% endif %}
```

常用标签：

- `{% if %}`/`{% elif %}`/`{% else %}`：条件判断
- `{% for %}`/`{% endfor %}`：循环
- `{% url %}`：生成URL
- `{% block %}`/`{% endblock %}`：定义可被子模板覆盖的块

### 过滤器

过滤器使用管道符号(`|`)应用于变量，用于修改变量的显示：

```html
{{ name|lower }}
```

如果`name`的值为"John"，则输出为："john"

常用过滤器：

- `lower`：转换为小写
- `upper`：转换为大写
- `date`：格式化日期
- `length`：返回长度
- `default`：设置默认值

### 基础模板

创建一个基础模板`base.html`：

```html
<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}My Site{% endblock %}</title>
</head>
<body>
    <div id="sidebar">
        {% block sidebar %}
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/polls/">Polls</a></li>
        </ul>
        {% endblock %}
    </div>

    <div id="content">
        {% block content %}{% endblock %}
    </div>
</body>
</html>
```

### 在视图中使用模板

在视图中使用`render()`函数渲染模板：

```python
from django.shortcuts import render
from .models import Question

def index(request):
    latest_question_list = Question.objects.order_by('-pub_date')[:5]
    context = {'latest_question_list': latest_question_list}
    return render(request, 'polls/index.html', context)
```

`render()`函数接收：
1. 请求对象
2. 模板路径
3. 上下文字典（包含要传递给模板的变量）

### 静态文件

在模板中包含静态文件（CSS、JavaScript、图片等）：

```html
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'polls/style.css' %}">
```

确保在应用目录下创建了`static`目录：

```
polls/
    static/
        polls/
            style.css
            images/
                background.gif
```

## 小结

- Django模板使用变量、标签和过滤器来生成动态HTML
- 模板继承允许创建可重用的页面布局
- 使用`render()`函数在视图中渲染模板
- 静态文件（CSS、JavaScript等）可以通过`{% static %}`标签包含
