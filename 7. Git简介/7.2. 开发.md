## Git 开发

Git 开发是指在 Git 版本控制系统中进行日常开发工作的过程。本章将介绍在开发过程中如何使用 Git 进行代码管理、版本控制和团队协作。

### 开发工作流

#### 1. 开发流程概述

Git 开发通常遵循以下流程：

1. **获取最新代码**：从远程仓库拉取最新更改
2. **创建功能分支**：为特定功能创建独立分支
3. **开发功能**：在分支上进行代码开发
4. **提交更改**：定期提交代码更改
5. **推送分支**：将分支推送到远程仓库
6. **创建 Pull Request**：请求代码审查和合并
7. **代码审查**：团队成员审查代码
8. **合并代码**：将功能分支合并到主分支

#### 2. 开发模式

- **功能分支开发**：每个功能在独立分支开发
- **Git Flow**：使用 develop、feature、release、hotfix 分支
- **GitHub Flow**：简化的分支策略
- **Trunk Based Development**：基于主分支的开发

### 本章内容

本章将详细介绍 Git 开发过程中的各个方面：

1. **添加 SSH 账户**：配置 SSH 密钥进行安全访问
2. **本地克隆**：克隆远程仓库到本地开发环境
3. **同步分支**：与远程分支保持同步
4. **开发管理**：管理开发过程中的代码更改
5. **工作区与暂存区**：理解 Git 的工作区概念
6. **暂存区与仓库区**：管理暂存区和仓库区
7. **历史**：查看和管理提交历史
8. **删除**：删除分支、文件和历史记录
9. **本地与服务器**：本地和远程仓库的交互
10. **Debug 分支**：使用分支进行调试

### 开发工具

#### 1. 命令行工具

```bash
# 基本 Git 命令
git status          # 查看状态
git add             # 添加文件
git commit          # 提交更改
git push            # 推送更改
git pull            # 拉取更改
git branch          # 分支管理
git merge           # 合并分支
git rebase          # 变基操作
```

#### 2. 图形化工具

- **GitHub Desktop**：GitHub 官方桌面客户端
- **GitKraken**：功能强大的 Git 客户端
- **SourceTree**：免费的 Git 客户端
- **VS Code**：集成 Git 功能的代码编辑器

#### 3. IDE 集成

- **IntelliJ IDEA**：Java IDE 的 Git 集成
- **Eclipse**：Eclipse 的 Git 插件
- **Visual Studio**：微软 IDE 的 Git 集成
- **Xcode**：macOS 开发工具的 Git 集成

### 开发环境配置

#### 1. 用户配置

```bash
# 设置用户信息
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# 设置默认编辑器
git config --global core.editor "code --wait"

# 设置默认分支名
git config --global init.defaultBranch main
```

#### 2. 别名配置

```bash
# 创建常用别名
git config --global alias.st status
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.unstage 'reset HEAD --'
git config --global alias.last 'log -1 HEAD'
git config --global alias.visual '!gitk'
```

#### 3. 忽略文件配置

```bash
# 创建全局忽略文件
git config --global core.excludesfile ~/.gitignore_global

# 编辑全局忽略文件
cat > ~/.gitignore_global << 'EOF'
# 操作系统文件
.DS_Store
Thumbs.db

# 编辑器文件
.vscode/
.idea/
*.swp
*.swo

# 编译文件
*.pyc
__pycache__/
*.o
*.exe
EOF
```

### 开发最佳实践

#### 1. 提交规范

```bash
# 提交信息格式
# <type>(<scope>): <subject>
#
# <body>
#
# <footer>

# 类型说明
# feat: 新功能
# fix: 修复
# docs: 文档
# style: 格式
# refactor: 重构
# test: 测试
# chore: 构建

# 示例
git commit -m "feat(user): add user authentication

- Add login/logout functionality
- Add user registration
- Add password reset

Closes #123"
```

#### 2. 分支管理

```bash
# 分支命名规范
feature/user-authentication    # 功能分支
bugfix/login-validation        # 修复分支
hotfix/security-patch          # 热修复分支
release/v1.2.0                 # 发布分支

# 分支生命周期
# 1. 创建分支
git checkout -b feature/new-feature

# 2. 开发功能
# 编写代码...

# 3. 提交更改
git add .
git commit -m "Add new feature"

# 4. 推送分支
git push -u origin feature/new-feature

# 5. 创建 Pull Request
# 在 Web 界面创建 PR

# 6. 代码审查
# 团队成员审查代码

# 7. 合并分支
# 通过 PR 合并到主分支

# 8. 删除分支
git branch -d feature/new-feature
git push origin --delete feature/new-feature
```

#### 3. 代码审查

```bash
# 创建 Pull Request 前检查
# 1. 确保代码通过测试
npm test

# 2. 确保代码通过检查
npm run lint

# 3. 确保提交信息规范
git log --oneline -5

# 4. 确保分支是最新的
git pull origin main

# 5. 创建 Pull Request
# 在 GitHub/GitLab 中创建 PR
```

### 开发工具链

#### 1. 持续集成

```bash
# GitHub Actions 配置
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Use Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
    - name: Install dependencies
      run: npm ci
    - name: Run tests
      run: npm test
    - name: Run linting
      run: npm run lint
```

#### 2. 代码质量工具

```bash
# ESLint 配置
npm install --save-dev eslint

# Prettier 配置
npm install --save-dev prettier

# Husky 配置
npm install --save-dev husky lint-staged

# 配置 package.json
{
  "scripts": {
    "lint": "eslint src/",
    "format": "prettier --write src/",
    "test": "jest"
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "src/**/*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ]
  }
}
```

#### 3. 自动化脚本

```bash
# 创建开发脚本
cat > scripts/dev.sh << 'EOF'
#!/bin/bash

echo "开始开发流程..."

# 检查工作区状态
git status

# 运行测试
npm test

# 运行代码检查
npm run lint

# 格式化代码
npm run format

echo "开发流程完成！"
EOF

chmod +x scripts/dev.sh
```

### 学习目标

通过本章的学习，你将能够：

- **配置开发环境**：设置 Git 开发环境
- **管理代码更改**：有效地管理开发过程中的代码更改
- **使用分支**：熟练使用分支进行功能开发
- **团队协作**：与团队成员协作开发
- **代码审查**：参与代码审查流程
- **自动化工具**：使用自动化工具提高开发效率
- **问题解决**：解决开发过程中的常见问题

### 下一步

现在让我们开始学习 Git 开发的具体内容。首先从添加 SSH 账户开始，了解如何安全地访问远程仓库。