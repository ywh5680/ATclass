## 创建仓库

Git 仓库是存储项目文件和版本历史的地方。创建仓库是使用 Git 的第一步，本章将详细介绍如何创建本地仓库和远程仓库。

### 本地仓库创建

#### 1. 初始化新仓库

在现有项目目录中初始化 Git 仓库：

```bash
# 进入项目目录
cd /path/to/your/project

# 初始化 Git 仓库
git init

# 查看仓库状态
git status
```

初始化后，Git 会在项目目录中创建一个 `.git` 文件夹，用于存储版本控制信息。

#### 2. 克隆现有仓库

从远程仓库克隆项目到本地：

```bash
# 克隆仓库到当前目录
git clone https://github.com/username/repository.git

# 克隆到指定目录
git clone https://github.com/username/repository.git my-project

# 克隆特定分支
git clone -b develop https://github.com/username/repository.git

# 克隆并设置远程仓库名称
git clone -o origin https://github.com/username/repository.git
```

#### 3. 查看仓库信息

```bash
# 查看远程仓库信息
git remote -v

# 查看仓库配置
git config --list

# 查看当前分支
git branch

# 查看提交历史
git log --oneline
```

### 远程仓库创建

#### 1. GitHub 仓库创建

1. **登录 GitHub**：访问 https://github.com 并登录账户

2. **创建新仓库**：
   - 点击右上角的 "+" 号
   - 选择 "New repository"
   - 填写仓库名称和描述
   - 选择公开或私有
   - 选择是否初始化 README 文件

3. **获取仓库地址**：
   - HTTPS：`https://github.com/username/repository.git`
   - SSH：`git@github.com:username/repository.git`

#### 2. 连接本地仓库到远程

```bash
# 添加远程仓库
git remote add origin https://github.com/username/repository.git

# 验证远程仓库
git remote -v

# 推送代码到远程仓库
git push -u origin main
```

### 仓库配置

#### 1. 用户信息配置

```bash
# 设置全局用户信息
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# 设置当前仓库用户信息
git config user.name "Your Name"
git config user.email "your.email@example.com"

# 查看配置
git config --list
```

#### 2. 编辑器配置

```bash
# 设置默认编辑器
git config --global core.editor "code --wait"  # VS Code
git config --global core.editor "vim"          # Vim
git config --global core.editor "nano"         # Nano
```

#### 3. 换行符配置

```bash
# Windows 用户
git config --global core.autocrlf true

# Linux/Mac 用户
git config --global core.autocrlf input
```

### 仓库结构

#### 1. 标准项目结构

```
project/
├── .git/                 # Git 版本控制信息
├── src/                  # 源代码目录
├── docs/                 # 文档目录
├── tests/                # 测试文件
├── README.md             # 项目说明
├── .gitignore            # Git 忽略文件
├── requirements.txt      # Python 依赖
├── package.json          # Node.js 依赖
└── LICENSE               # 许可证文件
```

#### 2. 创建 .gitignore 文件

```bash
# 创建 .gitignore 文件
touch .gitignore

# 编辑 .gitignore 文件
cat > .gitignore << EOF
# 操作系统文件
.DS_Store
Thumbs.db

# 编辑器文件
.vscode/
.idea/
*.swp
*.swo

# 编译文件
*.pyc
__pycache__/
*.o
*.exe

# 依赖目录
node_modules/
venv/
env/

# 日志文件
*.log

# 临时文件
*.tmp
*.temp
EOF
```

### 仓库操作

#### 1. 添加文件到仓库

```bash
# 添加单个文件
git add filename.txt

# 添加多个文件
git add file1.txt file2.txt

# 添加所有文件
git add .

# 添加特定类型文件
git add *.txt

# 交互式添加
git add -i
```

#### 2. 提交更改

```bash
# 提交并添加消息
git commit -m "Initial commit"

# 添加所有更改并提交
git commit -am "Update files"

# 修改最后一次提交
git commit --amend -m "Updated commit message"
```

#### 3. 查看仓库状态

```bash
# 查看工作区状态
git status

# 查看简短状态
git status -s

# 查看未跟踪文件
git status --ignored
```

### 分支管理

#### 1. 创建分支

```bash
# 创建新分支
git branch feature-branch

# 创建并切换到新分支
git checkout -b feature-branch

# 使用新语法创建并切换分支
git switch -c feature-branch
```

#### 2. 分支操作

```bash
# 查看所有分支
git branch

# 查看远程分支
git branch -r

# 查看所有分支（本地和远程）
git branch -a

# 切换分支
git checkout main
git switch main

# 删除分支
git branch -d feature-branch
git branch -D feature-branch  # 强制删除
```

### 远程仓库操作

#### 1. 推送代码

```bash
# 推送到远程仓库
git push origin main

# 推送所有分支
git push --all

# 推送标签
git push --tags

# 强制推送（谨慎使用）
git push --force
```

#### 2. 拉取更新

```bash
# 拉取远程更新
git pull origin main

# 拉取所有分支
git pull --all

# 只获取不合并
git fetch origin
```

### 常见问题解决

#### 1. 仓库初始化问题

```bash
# 重新初始化仓库
rm -rf .git
git init

# 修复损坏的仓库
git fsck --full
```

#### 2. 远程仓库问题

```bash
# 更改远程仓库地址
git remote set-url origin https://github.com/new-username/repository.git

# 删除远程仓库
git remote remove origin

# 重命名远程仓库
git remote rename origin upstream
```

#### 3. 权限问题

```bash
# 检查 SSH 连接
ssh -T git@github.com

# 配置 SSH 密钥
ssh-keygen -t rsa -b 4096 -C "your.email@example.com"
```

### 最佳实践

#### 1. 仓库命名规范

- 使用小写字母和连字符
- 避免使用空格和特殊字符
- 使用描述性的名称
- 示例：`my-awesome-project`、`django-blog-app`

#### 2. 提交信息规范

- 使用简洁明了的描述
- 第一行不超过 50 个字符
- 使用现在时态
- 示例：`Add user authentication feature`

#### 3. 分支命名规范

- `main` 或 `master`：主分支
- `develop`：开发分支
- `feature/xxx`：功能分支
- `bugfix/xxx`：修复分支
- `hotfix/xxx`：紧急修复分支

### 总结

通过本章的学习，你应该掌握了：

1. **本地仓库创建**：使用 `git init` 和 `git clone`
2. **远程仓库创建**：在 GitHub 上创建仓库
3. **仓库配置**：设置用户信息和编辑器
4. **文件管理**：添加、提交和查看文件状态
5. **分支管理**：创建、切换和删除分支
6. **远程操作**：推送和拉取代码
7. **问题解决**：处理常见的仓库问题

创建仓库是 Git 工作流程的第一步，掌握这些基础知识将为后续的开发工作奠定坚实的基础。